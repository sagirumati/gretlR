---
title: "A Seamless Integration of Gretl and R"
author: "Sagiru Mati"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{A Seamless Integration of Gretl and R}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup1, include=FALSE}
library(gretlR)
```

# About gretlR

gretlR is an R package that can run `gretl` program from R, R Markdown and Quarto. 


# Installation

gretlR can be installed using the following commands in R.

```{r installation,eval=FALSE}
install.packages("gretlR")

          OR
          
devtools::install_github('sagirumati/gretlR')
```

# Usage

Please load the gretlR package as follows: 

````
```{r gretlR} `r ''`                                                            
library(gretlR)
```
````


Then create a chunk for `gretl` as shown below:

````` 
```{gretl gretlR1,eval=T,echo=T,comment=NULL,results='hide'} `r ''`
nulldata 500
set seed 13
gretl1 = normal()
gretl2 = normal()
setobs 12 1980:01 --time-series
gnuplot gretl1 --time-series --with-lines --output="line.png"
gnuplot gretl2 gretl1 --output="scatter.png"
ols gretl1 const gretl2
modeltab add
tabprint --output="ols.Rmd"
eqnprint --output="olsmodel.Rmd"
tabprint --output="ols.csv"
```  
`````

```{gretl gretlR1,eval=F,echo=F,comment=NULL}
nulldata 500
set seed 13
gretl1 = normal()
gretl2 = normal()
setobs 12 1980:01 --time-series
gnuplot gretl1 --time-series --with-lines --output="line.png"
gnuplot gretl2 gretl1 --output="scatter.png"
ols gretl1 const gretl2
modeltab add
tabprint --output="ols.Rmd"
eqnprint --output="olsmodel.Rmd"
tabprint --output="ols.csv"
```




The above chunk creates a gretl program with the chunkâ€™s content, then
automatically run the gretl script, which will save gretl outputs in the new folder `gretlR` created in the current  working directory.

We can *dynamically and reproducibly* fetch the `gretl` graph object created by the `gretl` chunk using the following R chunk: 

For the scatter graph:

```{r scatter,eval=F,echo=T,fig.cap="Scatter graph produced by gretl chunk",out.width='\\textwidth'}
library(knitr)
knitr::include_graphics("scatter.png")

```


<br><br><br><br>

or the line graph:

```{r line,eval=F,eval=F,echo=T,out.width='\\textwidth',fig.cap="Line graph produced by gretl chunk"}
knitr::include_graphics("line.png")

```


we can also include the equation of the OLS generated by the `gretl` chunk using the following R chunk;


<br><br><br><br>

Remember the OLS equation output is saved by the `gretl` chunk as `olsmodel.Rmd`. The entire OLS equation model:

````
```{r child, child='olsmodel.Rmd'} `r ''`

```
````

```{r child,,eval=F,echo=T, child='olsmodel.Rmd'}

```


<br><br><br><br>

Remember the OLS table output is saved by `gretl` chunk as `ols.Rmd`. The entire OLS table output:


````
```{r child1,child="ols.Rmd"} `r ''`

```
````

```{r child1,eval=F,echo=T, child="ols.Rmd"} 

```


# write_inp function

This function writes `gretl` file.

```{r writeInp}
code=r'(nulldata 500
set seed 13
gretl1 = normal()
gretl2 = normal()
setobs 12 1980:01 --time-series
gnuplot gretl1 --time-series --with-lines --output="line.png"
gnuplot gretl2 gretl1 --output="scatter.png"
)'

write_inp(code,path="gretlCodes")

```

# exec_inp function

This function executes existing `gretl` files.

```{r execInp}
code=r'(nulldata 500
set seed 13
gretl1 = normal()
gretl2 = normal()
setobs 12 1980:01 --time-series
gnuplot gretl1 --time-series --with-lines --output="line.png"
gnuplot gretl2 gretl1 --output="scatter.png"
 )'
write_inp(code,path="SomeFolder/gretlCodes")
exec_inp("someFolder/gretlCodes")

```

# exec_gretl function

This function creates `gretl`file from R object or a set of character strings and executes it.

```{r execGretl}
code=r'(nulldata 500
set seed 13
gretl1 = normal()
gretl2 = normal()
setobs 12 1980:01 --time-series
gnuplot gretl1 --time-series --with-lines --output="line.png"
gnuplot gretl2 gretl1 --output="scatter.png"
 )'
exec_gretl(code)

```

<br><br><br><br>


<!-- Unfortunately, user of `gretl` has little or no control over the outputs customisation before exporting. -->


<br><br><br><br>

Please visit my [Github](https://github.com/sagirumati/gretlR/tree/master/inst/examples/) for a better explanation and example files.


